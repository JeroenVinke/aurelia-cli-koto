{"version":3,"sources":["src/app.js","src/environment.js","src/main.js","src/resources/index.js"],"names":["Koto","d3","MyChartName","selection","chart","configs","height","name","description","value","type","units","category","getter","setter","newValue","width","x","scaleLinear","range","config","y","domain","rangeRound","layer","base","append","dataBind","data","selectAll","d","time","insert","on","length","_length","attr","i","style","duration","remove","text","preDraw","default","DataSrc","map","next","Math","max","min","random","fetch","shift","push","App","message","attached","dataSrc","barChart","select","draw","setInterval","debug","testing","configure","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import * as Koto from 'koto';\nimport * as d3 from 'd3';\n\nclass MyChartName extends Koto.default {\n  constructor(selection) {\n    super(selection);\n\n    // Setup\n    var chart = this;\n\n    // define configs\n    this.configs = {\n      height: {\n        name: 'height',\n        description: 'The height of the chart.',\n        value: 500,\n        type: 'number',\n        units: 'px',\n        category: 'Size',\n        getter: function (){\n          // get value\n          return this.value;\n        },\n        setter: function (newValue){\n          // Set value\n          return newValue;\n        }\n      },\n      width: {\n        name: 'width',\n        description: 'The widthj of the chart.',\n        value: 800,\n        units: 'px',\n        type: 'number',\n        category: 'Size'\n      }\n    };\n\n    // Scales\n    this.x = d3.scaleLinear()\n      .range([0, this.config('width')]);\n\n    this.y = d3.scaleLinear()\n      .domain([0, 100])\n      .rangeRound([0, this.config('height')]);\n\n    // add a layer\n    this.layer('bars', this.base.append('g'), {\n      // destructuring ftw\n      dataBind(data) {\n        return this.selectAll('rect')\n          .data(data, d => d.time);\n      },\n      insert() {\n        return this.append('rect');\n      }\n    })\n    // lifecycle events (Arrow function syntax)\n    .on('enter', selection => {\n      var length = this._length = selection.data().length;\n      selection.attr('x', (d, i) => this.x(i + 1) - 0.5 )\n        .attr('y', (d) => this.config('height') - this.y(d.value) - 0.5)\n        .attr('width', this.config('width') / length)\n        .style('fill', 'steelBlue')\n        .attr('height', d => this.y(d.value));\n    })\n    .on('merge:transition', selection => {\n      selection.duration(1000)\n        .attr('x', (d, i) => this.x(i) - 0.5);\n    })\n    .on('exit:transition', selection => {\n      selection.duration(1000)\n        .attr('x', (d, i) => this.x(i - 1) - 0.5)\n        .remove();\n    });\n\n    // add another layer \n    this.layer('labels', this.base.append('g'), {\n      dataBind(data) {\n        return this.selectAll('text')\n          .data(data, d => d.time);\n      },\n      insert() {\n        return this.append('text');\n      }\n    })\n    // non arrow function syntax\n    .on('enter', function() {\n      var length = this.data().length;\n      this\n        .attr('x', (d, i) => chart.x(i + 1) + ((chart.config('width') / length) / 2))\n        .attr('y', d => chart.config('height') - chart.y(d.value) - 15)\n        .style('fill', 'steelBlue')\n        .style('text-anchor', 'middle')\n        .text(d => d.value);\n    })\n    .on('merge:transition', function() {\n      this.duration(1000)\n        .attr('x', (d, i) => chart.x(i) + ((chart.config('width') / chart._length) / 2));\n    })\n    .on('exit:transition', function() {\n      this.duration(1000)\n        .attr('x', (d, i) => chart.x(i - 1) - 0.5)\n        .remove();\n    });\n  }\n\n  //override methods\n  preDraw(data) {\n    this.x.domain([0, data.length]);\n  }\n}\n\n// we attach everything to the global `koto` variable\nKoto.MyChartName = MyChartName;\n\n\nclass DataSrc {\n  constructor() {\n    this.time = 1297110663; // start time (seconds since epoch)\n    this.value = 70;\n    this.data = d3.range(33).map(() => { return this.next(); });\n  }\n\n  next() {\n    this.time += 1;\n    this.value = ~~Math.max(10, Math.min(90, this.value + 10 * (Math.random() - .5)));\n    return {\n      time: this.time,\n      value: this.value\n    };\n  }\n\n  fetch() {\n    this.data.shift();\n    this.data.push(this.next());\n  }\n}\n\nexport class App {\n  constructor() {\n    this.message = 'Hello World!';\n  }\n\n  attached() {\n    let dataSrc = new DataSrc();\n    let barChart = new Koto.MyChartName(d3.select('#test'));\n    barChart.draw(dataSrc.data);\n    setInterval(function() {\n      dataSrc.fetch();\n      barChart.draw(dataSrc.data);\n    }, 1500);\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n"],"sourceRoot":".."}